<!--ìŠ¤í‚¨êµì²´ìš© htmlì´ì§€ë§Œ ì˜ ì•ˆë˜ë¯€ë¡œ ë‚˜ì¤‘ì„ ê¸°ì•½ì•½-->

<div class="switch-skin-container">
    <h6>Switch Skin</h6>
    <div class="avatar-options">
        <img src="/assets/images/natural.jpg" onclick="changeProfile('natural', '/assets/images/natural.jpg', 'íƒ€ë‹¥íƒ€ë‹¥...ì‘ì—… ì¤‘!ğŸŒ¿ğŸ•Šï¸', 'natural')" alt="Natural">
        <img src="/assets/images/pureblue.jpg" onclick="changeProfile('pureblue', '/assets/images/pureblue.jpg', 'íƒ€ë‹¥íƒ€ë‹¥...ì‘ì—… ì¤‘!ğŸ’™ğŸŒ€', 'pureblue')" alt="Pure Blue">
        <img src="/assets/images/heart2.jpg" onclick="changeProfile('blackpink', '/assets/images/heart2.jpg', 'íƒ€ë‹¥íƒ€ë‹¥...ì‘ì—… ì¤‘!ğŸ€', 'blackpink')" alt="Blackpink">
        <img src="/assets/images/blue.jpg" onclick="changeProfile('blue', '/assets/images/blue.jpg', 'íƒ€ë‹¥íƒ€ë‹¥...ì‘ì—… ì¤‘!ğŸŒŠ', 'blue')" alt="Blue">
    </div>
</div>

<script>
    // í”„ë¡œí•„ ë³€ê²½ ë° ìŠ¤í‚¨ ì ìš©
    function changeProfile(profileName, avatar, bio, skin) {
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ (ìƒˆë¡œê³ ì¹¨í•´ë„ ìœ ì§€)
        localStorage.setItem("selectedProfile", profileName);
        localStorage.setItem("selectedAvatar", avatar);
        localStorage.setItem("selectedBio", bio);
        localStorage.setItem("selectedSkin", skin);

        // í”„ë¡œí•„ ì‚¬ì§„ ë³€ê²½
        document.querySelector(".author__avatar img").src = avatar;
        
        // ì†Œê°œê¸€ ë³€ê²½
        document.querySelector(".author__bio").innerText = bio;

        // ìŠ¤í‚¨ ë³€ê²½ (Jekyllì—ì„œ `_minimal.scss` íŒŒì¼ ë¡œë“œ)
        document.documentElement.setAttribute("data-skin", skin);

        // SCSS íŒŒì¼ ë™ì ìœ¼ë¡œ ë³€ê²½
        let currentSkin = document.getElementById("dynamic-skin");
        if (currentSkin) {
            currentSkin.href = `/assets/css/${skin}.css`; // ì˜ˆ: `/assets/css/natural.css`
        } else {
            let link = document.createElement("link");
            link.id = "dynamic-skin";
            link.rel = "stylesheet";
            link.href = `/assets/css/${skin}.css`;
            document.head.appendChild(link);
        }

        // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ (ë³€ê²½ ì ìš©)
        location.reload();
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ì„¤ì • ì ìš©
    document.addEventListener("DOMContentLoaded", function () {
        var savedAvatar = localStorage.getItem("selectedAvatar");
        var savedBio = localStorage.getItem("selectedBio");
        var savedSkin = localStorage.getItem("selectedSkin");

        if (savedAvatar) {
            document.querySelector(".author__avatar img").src = savedAvatar;
        }

        if (savedBio) {
            document.querySelector(".author__bio").innerText = savedBio;
        }

        if (savedSkin) {
            document.documentElement.setAttribute("data-skin", savedSkin);

            let link = document.createElement("link");
            link.id = "dynamic-skin";
            link.rel = "stylesheet";
            link.href = `/assets/css/${savedSkin}.css`;
            document.head.appendChild(link);
        }
    });
</script>
